# MegaSop - Authentic Sopwith Biplane Shooter

A faithful TypeScript recreation of the classic 1984 Sopwith biplane shooter with authentic PC speaker audio and realistic flight controls.

## ğŸ›©ï¸ Features

- **Authentic PC Speaker Audio**: Faithful recreation of original sound effects with proper priority system
- **Realistic Flight Physics**: Continuous roll controls, stall mechanics, lift, drag, and thrust simulation  
- **Original Game Elements**: Birds, terrain collision, enemy AI with loop maneuvers
- **Modern Architecture**: Clean TypeScript codebase with modular design
- **Fullscreen Support**: Press F for immersive gameplay

## ğŸ® Controls

- **â†‘â†“ Arrow Keys**: Continuous roll/pitch (hold for barrel rolls)
- **â†â†’ Arrow Keys**: Power down/up
- **Space**: Fire machine gun
- **B**: Drop bombs
- **F**: Toggle fullscreen
- **Any key on title**: Start game

## ğŸ› ï¸ Development

### Prerequisites
- Node.js (for TypeScript compilation)
- Modern web browser with ES2020 support

### Quick Start
```bash
# Install dependencies
npm install

# Build TypeScript
npm run build

# Serve the game
npm run serve
```

### Development Commands
```bash
npm run build      # Compile TypeScript to JavaScript
npm run watch      # Watch for changes and auto-compile
npm run dev        # Watch + serve on localhost:8000
npm run serve      # Serve built files
npm run clean      # Clean build directory
npm run typecheck  # Type check without compilation
```

### File Structure
```
src/
â”œâ”€â”€ classes/          # Game object classes
â”‚   â”œâ”€â”€ Game.ts      # Main game controller
â”‚   â”œâ”€â”€ Player.ts    # Player biplane with physics
â”‚   â”œâ”€â”€ Enemy.ts     # AI enemy planes
â”‚   â”œâ”€â”€ Bird.ts      # Ambient birds
â”‚   â”œâ”€â”€ Bullet.ts    # Player projectiles
â”‚   â”œâ”€â”€ Bomb.ts      # Gravity-affected bombs
â”‚   â””â”€â”€ EnemyBullet.ts # Enemy projectiles
â”œâ”€â”€ systems/          # Game systems
â”‚   â”œâ”€â”€ AudioSystem.ts   # PC Speaker audio emulation
â”‚   â””â”€â”€ RenderSystem.ts  # Canvas rendering
â”œâ”€â”€ types/           # TypeScript type definitions
â”‚   â””â”€â”€ game.ts      # Game interfaces and types
â””â”€â”€ main.ts          # Entry point
```

## ğŸµ Authentic Audio System

The audio system faithfully recreates PC Speaker behavior:

- **Priority-based Sound**: Higher priority sounds interrupt lower ones
- **Square Wave Generation**: Authentic PC speaker tones
- **Original Frequencies**: Exact note frequencies from original game
- **Sound Effects**: Machine gun, explosions, engine, crashes, title music

### Sound Priorities (Original Sopwith Values)
1. Title Music (5)
2. Explosions (10) 
3. Bomb Drops (20)
4. Machine Gun (30)
5. Crashes (50)
6. Engine Sound (60)

## ğŸ›©ï¸ Flight Physics

Realistic aerodynamics simulation:

- **Lift**: Generated by angle of attack and airspeed
- **Drag**: Opposes motion, increases with speed squared
- **Thrust**: Propeller power affects acceleration
- **Gravity**: Constant downward force
- **Stall Mechanics**: Loss of lift at low speed or high angle of attack
- **Continuous Rolls**: Hold controls for realistic barrel rolls

## ğŸ—ï¸ Architecture

- **Modular Design**: Clean separation of concerns
- **TypeScript**: Full type safety and modern JavaScript features
- **Event-driven**: Responsive input handling
- **Component-based**: Reusable game objects with common interfaces
- **System Architecture**: Separate systems for audio, rendering, physics

## ğŸ¯ Game Mechanics

- **Collision Detection**: AABB collision system for all objects
- **Health System**: Player damage from crashes and enemy fire
- **AI Behavior**: Enemy planes with patrol, chase, loop, and evade states
- **Terrain Generation**: Procedural hills using sine wave combinations
- **Parallax Scrolling**: Multi-layer cloud system for depth
- **Scoring**: Points for destroying enemies (100 bullets, 150 bombs)

## ğŸ“Š Performance

- **60 FPS**: Smooth gameplay using requestAnimationFrame
- **Efficient Rendering**: Only draws visible terrain and objects
- **Memory Management**: Automatic cleanup of off-screen objects
- **Type Safety**: Compile-time error checking with TypeScript

## ğŸ•¹ï¸ Original Sopwith (1984)

Created by BMB Compuscience Canada, Sopwith was a pioneering side-scrolling shooter that introduced:
- Realistic biplane physics
- PC Speaker audio with priority system
- Terrain-following gameplay
- AI enemy pilots

This recreation maintains the authentic feel while adding modern conveniences like fullscreen support and improved graphics.

## ğŸ“„ License

MIT License - Feel free to use and modify

## ğŸ™ Credits

- Original Sopwith by BMB Compuscience Canada
- SDL Sopwith port analysis by Simon Howard (fragglet)
- MegaSop TypeScript recreation with authentic PC speaker audio

---

*Experience the thrill of WWI aerial combat with authentic 1984 PC speaker audio!*